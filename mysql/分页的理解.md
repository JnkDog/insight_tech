# åˆ†é¡µä¼˜åŒ–
ä»¥ä¸€ä¸ªlimitè¯­å¥ä¸ºğŸŒ° select t.* from t_topic t LIMIT 90000,10;
å…·ä½“æ“ä½œç»†èŠ‚æ˜¯æ‰«ææ»¡è¶³æ¡ä»¶çš„90010è¡Œï¼Œä¸¢åˆ°å‰é¢çš„90000è¡Œï¼Œå–ç¬¬10è¡Œã€‚

è¿™å¥ SQL çš„æ‰§è¡Œé€»è¾‘æ˜¯
1.ä»æ•°æ®è¡¨ä¸­è¯»å–ç¬¬Næ¡æ•°æ®æ·»åŠ åˆ°æ•°æ®é›†ä¸­
2.é‡å¤ç¬¬ä¸€æ­¥ç›´åˆ° N = 90000 + 10
3.æ ¹æ® offset æŠ›å¼ƒå‰é¢ 90000 æ¡æ•°
4.è¿”å›å‰©ä½™çš„ 10 æ¡æ•°æ®

## å…ˆæ¥ç†è§£æ•°æ®åº“æ‰§è¡Œé€»è¾‘ï¼Œæ­¥éª¤
MySQLæ‰§è¡Œé€»è¾‘æ¢³ç†
å‡å®šä¸€ä¸ªè¡¨å’ŒSQL
```SQL
CREATE TABLE t (
    id INT UNSIGNED NOT NULL AUTO_INCREMENT,
    key1 VARCHAR(100),
    common_field VARCHAR(100),
    PRIMARY KEY (id),
    KEY idx_key1 (key1)
) Engine=InnoDB CHARSET=utf8;

SELECT * FROM t WHERE key1 > 'a' AND key1 < 'b' AND common_field != 'a';
```

MySQLçš„Serverå±‚ä¼šè¿›è¡Œæ–¹æ¡ˆé€‰å–
æ–¹æ¡ˆ1 å…¨è¡¨æ‰«æ
æ–¹æ¡ˆ2 ä½¿ç”¨äºŒçº§ç´¢å¼•idx_key1ï¼Œæ­¤æ—¶éœ€è¦æ‰«ækey1åˆ—å€¼åœ¨('a', 'b')ä¹‹é—´çš„å…¨éƒ¨äºŒçº§ç´¢å¼•è®°å½•ï¼Œå¹¶ä¸”æ¯æ¡äºŒçº§ç´¢å¼•è®°å½•éƒ½éœ€è¦è¿›è¡Œå›è¡¨æ“ä½œã€‚

serverå±‚ä¼šåˆ†æä¸Šè¿°ä¸¤ä¸ªæ–¹æ¡ˆå“ªä¸ªæˆæœ¬æ›´ä½ï¼Œç„¶åé€‰å–æˆæœ¬æ›´ä½çš„é‚£ä¸ªæ–¹æ¡ˆä½œä¸ºæ‰§è¡Œè®¡åˆ’ã€‚ç„¶åå°±è°ƒç”¨å­˜å‚¨å¼•æ“æä¾›çš„æ¥å£æ¥çœŸæ­£çš„æ‰§è¡ŒæŸ¥è¯¢äº†ã€‚

ç°åœ¨ä»¥æ–¹æ¡ˆ2ä½œä¸ºå‡è®¾
Serveré€šçŸ¥InnodbæŸ¥æ‰¾äºŒçº§ç´¢å¼•ï¼ˆa, bï¼‰ä¸­çš„ç¬¬ä¸€æ¡è®°å½•ï¼Œç„¶åå›è¡¨æ‰¾åˆ°ç¬¬ä¸€æ¡è®°å½•ï¼Œç„¶åè¿”å›ç»™Serverå±‚

serverå±‚æ”¶åˆ°å®Œæ•´çš„èšç°‡ç´¢å¼•è®°å½•åï¼Œç»§ç»­åˆ¤æ–­common_field!='a'æ¡ä»¶æ˜¯å¦æˆç«‹ï¼Œå¦‚æœä¸æˆç«‹åˆ™èˆå¼ƒè¯¥è®°å½•ï¼Œå¦åˆ™å°†è¯¥è®°å½•å‘é€åˆ°å®¢æˆ·ç«¯ã€‚ç„¶åå¯¹å­˜å‚¨å¼•æ“è¯´ï¼šâ€œè¯·æŠŠä¸‹ä¸€æ¡è®°å½•ç»™æˆ‘â€ã€‚
InnoDBæ ¹æ®è®°å½•çš„**next_record**å±æ€§æ‰¾åˆ°idx_key1çš„('a', 'b')åŒºé—´çš„ä¸‹ä¸€æ¡äºŒçº§ç´¢å¼•è®°å½•ï¼Œç„¶åè¿›è¡Œå›è¡¨æ“ä½œï¼Œå°†å¾—åˆ°çš„å®Œæ•´çš„èšç°‡ç´¢å¼•è®°å½•è¿”å›ç»™serverå±‚ã€‚

PS: **next_record** ä¸è®ºæ˜¯èšç°‡ç´¢å¼•è®°å½•è¿˜æ˜¯äºŒçº§ç´¢å¼•è®°å½•ï¼Œéƒ½åŒ…å«ä¸€ä¸ªç§°ä½œnext_recordçš„å±æ€§ï¼Œå„ä¸ªè®°å½•æ ¹æ®next_recordè¿æˆäº†ä¸€ä¸ªé“¾è¡¨ï¼Œå¹¶ä¸”é“¾è¡¨ä¸­çš„è®°å½•æ˜¯æŒ‰ç…§é”®å€¼æ’åºçš„ï¼ˆå¯¹äºèšç°‡ç´¢å¼•æ¥è¯´ï¼Œé”®å€¼æŒ‡çš„æ˜¯ä¸»é”®çš„å€¼ï¼Œå¯¹äºäºŒçº§ç´¢å¼•è®°å½•æ¥è¯´ï¼Œé”®å€¼æŒ‡çš„æ˜¯äºŒçº§ç´¢å¼•åˆ—çš„å€¼ï¼‰ã€‚-- æ•°æ®åº“ç³»ç»Ÿæ¦‚å¿µ

serverå±‚æ”¶åˆ°å®Œæ•´çš„èšç°‡ç´¢å¼•è®°å½•åï¼Œç»§ç»­åˆ¤æ–­common_field!='a'æ¡ä»¶æ˜¯å¦æˆç«‹ï¼Œå¦‚æœä¸æˆç«‹åˆ™èˆå¼ƒè¯¥è®°å½•ï¼Œå¦åˆ™å°†è¯¥è®°å½•å‘é€åˆ°å®¢æˆ·ç«¯ã€‚

... ç„¶åå°±ä¸åœçš„é‡å¤ä¸Šè¿°è¿‡ç¨‹ã€‚

## limitçš„ç†è§£
MySQLæ˜¯åœ¨**serverå±‚**å‡†å¤‡å‘**å®¢æˆ·ç«¯å‘é€è®°å½•çš„æ—¶å€™æ‰ä¼šå»å¤„ç†LIMITå­å¥ä¸­çš„å†…å®¹**
```SQL
SELECT * FROM t ORDER BY key1 LIMIT 5000, 1;
```
å¦‚æœèµ°äºŒçº§ç´¢å¼•çš„è¯
* serverå±‚å‘InnoDBè¦ç¬¬1æ¡è®°å½•ï¼ŒInnoDBä»idx_key1ä¸­è·å–åˆ°ç¬¬ä¸€æ¡äºŒçº§ç´¢å¼•è®°å½•ï¼Œç„¶åè¿›è¡Œå›è¡¨æ“ä½œå¾—åˆ°å®Œæ•´çš„èšç°‡ç´¢å¼•è®°å½•ï¼Œç„¶åè¿”å›ç»™serverå±‚ã€‚serverå±‚å‡†å¤‡å°†å…¶å‘é€ç»™å®¢æˆ·ç«¯ï¼Œæ­¤æ—¶å‘ç°è¿˜æœ‰ä¸ªLIMIT 5000, 1çš„è¦æ±‚ï¼Œæ„å‘³ç€ç¬¦åˆæ¡ä»¶çš„è®°å½•ä¸­çš„ç¬¬5001æ¡æ‰å¯ä»¥çœŸæ­£å‘é€ç»™å®¢æˆ·ç«¯ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œå…ˆåšä¸ªç»Ÿè®¡ï¼Œæˆ‘ä»¬å‡è®¾serverå±‚ç»´æŠ¤äº†ä¸€ä¸ªç§°ä½œlimit_countçš„å˜é‡ç”¨äºç»Ÿè®¡å·²ç»è·³è¿‡äº†å¤šå°‘æ¡è®°å½•ï¼Œæ­¤æ—¶å°±åº”è¯¥å°†limit_countè®¾ç½®ä¸º1ã€‚

* serverå±‚å†å‘InnoDBè¦ä¸‹ä¸€æ¡è®°å½•ï¼ŒInnoDBå†æ ¹æ®äºŒçº§ç´¢å¼•è®°å½•çš„next_recordå±æ€§æ‰¾åˆ°ä¸‹ä¸€æ¡äºŒçº§ç´¢å¼•è®°å½•ï¼Œå†æ¬¡è¿›è¡Œå›è¡¨å¾—åˆ°å®Œæ•´çš„èšç°‡ç´¢å¼•è®°å½•è¿”å›ç»™serverå±‚ã€‚serverå±‚åœ¨å°†å…¶å‘é€ç»™å®¢æˆ·ç«¯çš„æ—¶å€™å‘ç°limit_countæ‰æ˜¯1ï¼Œæ‰€ä»¥å°±æ”¾å¼ƒå‘é€åˆ°å®¢æˆ·ç«¯çš„æ“ä½œï¼Œå°†limit_countåŠ 1ï¼Œæ­¤æ—¶limit_countå˜ä¸ºäº†2ã€‚

* ... é‡å¤ä¸Šè¿°æ“ä½œ

* ç›´åˆ°limit_countç­‰äº5000çš„æ—¶å€™ï¼Œserverå±‚æ‰ä¼šçœŸæ­£çš„å°†InnoDBè¿”å›çš„å®Œæ•´èšç°‡ç´¢å¼•è®°å½•å‘é€ç»™å®¢æˆ·ç«¯ã€‚

ä»ä¸Šè¿°è¿‡ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç”±äºMySQLä¸­æ˜¯åœ¨å®é™…å‘å®¢æˆ·ç«¯å‘é€è®°å½•å‰æ‰ä¼šå»åˆ¤æ–­LIMITå­å¥æ˜¯å¦ç¬¦åˆè¦æ±‚ï¼Œæ‰€ä»¥å¦‚æœä½¿ç”¨äºŒçº§ç´¢å¼•æ‰§è¡Œä¸Šè¿°æŸ¥è¯¢çš„è¯ï¼Œæ„å‘³ç€è¦è¿›è¡Œ5001æ¬¡å›è¡¨æ“ä½œã€‚serverå±‚åœ¨è¿›è¡Œæ‰§è¡Œè®¡åˆ’åˆ†æçš„æ—¶å€™ä¼šè§‰å¾—æ‰§è¡Œè¿™ä¹ˆå¤šæ¬¡å›è¡¨çš„æˆæœ¬å¤ªå¤§äº†ï¼Œè¿˜ä¸å¦‚ç›´æ¥å…¨è¡¨æ‰«æ+filesortå¿«å‘¢ï¼Œæ‰€ä»¥å°±é€‰æ‹©äº†åè€…æ‰§è¡ŒæŸ¥è¯¢ã€‚

## å¦‚ä½•ä¼˜åŒ–
åŠ å¦‚ä¸€ä¸ªè¯­å¥
```SQL
select * from table_name limit 10000,10
```
1. å­æŸ¥è¯¢æ·»åŠ 
```SQL
SELECT * FROM t, (SELECT id FROM t ORDER BY key1 LIMIT 5000, 1) AS d
    WHERE t.id = d.id;
```
å°±æ˜¯è¶Šå¾€ååˆ†é¡µï¼ŒLIMITè¯­å¥çš„åç§»é‡å°±ä¼šè¶Šå¤§ï¼Œé€Ÿåº¦ä¹Ÿä¼šæ˜æ˜¾å˜æ…¢
åˆ©ç”¨è¾…åŠ©ç´¢å¼•key1å…ˆæ±‚å‡ºidçš„å€¼ï¼ˆç´¢å¼•ä¸‹æ¨ï¼‰ä¸ç”¨å›è¡¨5001æ¬¡ï¼Œæ±‚å‡ºidåè¿›è¡ŒwhereæŸ¥æ‰¾èµ°ä¸»ç´¢å¼•
åŸºæœ¬é€šè¿‡ç›´æ¥æ ¹æ®ç´¢å¼•å­—æ®µå®šä½åï¼Œæ‰å–å‡ºç›¸åº”å†…å®¹ï¼Œæ•ˆç‡è‡ªç„¶å¤§å¤§æå‡ã€‚å¯¹limitçš„ä¼˜åŒ–ï¼Œä¸æ˜¯ç›´æ¥ä½¿ç”¨limitï¼Œè€Œæ˜¯é¦–å…ˆè·å–åˆ°offsetçš„idï¼Œç„¶åç›´æ¥ä½¿ç”¨limit sizeæ¥è·å–æ•°æ®ã€‚

2. åˆ©ç”¨ä¸»é”®è¿›è¡ŒæŸ¥è¯¢è½¬æ¢ï¼ˆå‡å®šè‡ªå¢ä¸»é”®ï¼Œidä¸ºä¸»é”®ï¼‰
```SQL
select * from table_name where (id >= 10000) limit 10
```
ç”±äºæ™®é€šæœç´¢æ˜¯å…¨è¡¨æœç´¢ï¼Œé€‚å½“çš„æ·»åŠ  WHERE æ¡ä»¶å°±èƒ½æŠŠæœç´¢ä»å…¨è¡¨æœç´¢è½¬åŒ–ä¸ºèŒƒå›´æœç´¢ï¼Œå¤§å¤§ç¼©å°æœç´¢çš„èŒƒå›´ï¼Œä»è€Œæé«˜æœç´¢æ•ˆç‡ã€‚

è¿™ä¸ªä¼˜åŒ–æ€è·¯å°±æ˜¯å‘Šè¯‰æ•°æ®åº“ï¼šã€Œä½ åˆ«æ•°äº†ï¼Œæˆ‘å‘Šè¯‰ä½ ï¼Œç¬¬10001æ¡æ•°æ®æ˜¯è¿™æ ·çš„ï¼Œä½ ç›´æ¥å»æ‹¿å§ã€‚ã€

https://cloud.tencent.com/developer/article/1639177

https://juejin.cn/post/6985478936683610149

https://blog.csdn.net/qq_34115899/article/details/120217907 mysqlå¦‚ä½•é€‰ç´¢å¼•

https://blog.csdn.net/qq_34115899/article/details/120727513