# 基础操作和坑
## 操作命令
1. dbsize。 返回数据库中的key数目。dbsize时间复杂度是O1（猜测维护了一个变量），反观keys 命令时间复杂度是On   线上环境key多的时候对性能有影响。
2.  setnx  setxx   setnx为键不存在才能设置成功，用于添加，xx想法只有key存在才能设置，用于更新   **setnx可以用来实现分布式锁**
3.  尽量采用批量操作，例如n个set指令，时间大概为n次网络连接+n次redis执行命令。而mset时间为1次网络+n次命令的时间
4.  当redis查询失效后，进入mysql寻找，并回填到redis中，**设置过期时间**
5.  hgetall，如果哈希元素过多会阻塞redis的可能，可以采用**hscan**，渐进式便利操作
